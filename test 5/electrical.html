<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Electrical and Electronics</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <style>
        #output { 
            word-break: break-word;
            margin-top: 20px;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 4px;
            border: 1px solid #ced4da;
            font-size: 0.9rem;
            resize: vertical;
            min-height: 38px;
        }
        .char-limit { color: red; }
        .char-count { 
            float: right; 
            font-size: 0.9rem; 
        }
        .component-section { display: none; }
        .active-section { display: block; }
        .form-section { margin-bottom: 1.5rem; }
        .is-invalid { border-color: #dc3545 !important; }
        .invalid-feedback { display: none; }
        #fullDescription {
            background-color: #f8f9fa;
            border: 1px solid #ced4da;
            resize: vertical;
            min-height: 38px;
        }
        h1 {
            font-size: 1.8rem;
            border-bottom: 2px solid #dee2e6;
            padding-bottom: 0.5rem;
        }
        label {
            font-weight: 500;
            color: #495057;
        }
        .output-group {
            margin-top: 20px;
        }
    .navbar-logo {
  height: 50px;
  width: auto;
}
  </style>
</head>
<body>
  
  <nav class="navbar navbar-light bg-white shadow-sm mb-4">
    <div class="container">
      <a class="navbar-brand" href="index.html">
        <img src="logo.jpeg" alt="Company Logo" class="navbar-logo">
      </a>
    </div>
  </nav>
    

    <div class="container mt-3">
        <h1 class="mb-4">Electrical and Electronics</h1>
        <form id="componentForm" novalidate>
            <div class="form-section">
                <div class="form-group">
                    <label>Component Type:</label>
                    <select id="component-type" class="form-control" onchange="toggleFields()" required>
                        <option value="">Select Type</option>
                        <option>Cable</option>
                        <option>Cable fittings</option>
                        <option>Conduit</option>
                        <option>Conduit fittings</option>
                        <option>Electrical and electronic items</option>
                    </select>
                    <div class="invalid-feedback">Please select a component type</div>
                </div>
            </div>

            <!-- Cable Section -->
            <div id="cable-section" class="component-section form-section">
                <div class="form-row">
                    <div class="col-md-4 form-group">
                        <label>Color:</label>
                        <input type="text" class="form-control" id="cable-color" placeholder="e.g., RED">
                    </div>
                    <div class="col-md-4 form-group">
                        <label>Material:</label>
                        <select class="form-control" id="cable-material" required>
                            <option value="">-- Select --</option>
                            <option>Copper</option>
                            <option>Aluminium</option>
                            <option>PVC</option>
                        </select>
                    </div>
                    <div class="col-md-4 form-group">
                        <label>Cable Type:</label>
                        <select class="form-control" id="cable-type" required>
                            <option value="">-- Select --</option>
                            <option>Armored Cable</option>
                            <option>Twin Flat Cable</option>
                            <option>Twin Flat Cable with Earth</option>
                            <option>Coaxial Cable</option>
                            <option>Twisted Pair Cable</option>
                            <option>Fiber Optic Cable</option>
                            <option>HDMI Cable</option>
                            <option>CAT6 Cable</option>
                            <option>VGA Cable</option>
                            <option>Thunderbolt Cable</option>
                            <option>DisplayPort Cable</option>
                            <option>RCA Cable</option>
                            <option>Audio Jack Cable (3.5mm)</option>
                            <option>DC Power Cable</option>
                            <option>AC Power Cable</option>
                            <option>Extension Power Cord</option>
                            <option>Laptop Power Adapter Cable</option>
                            <option>Lightning Cable</option>
                            <option>Sensor Cable</option>
                            <option>Telephone Cable</option>
                            <option>Control Cable</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="col-md-3 form-group">
                        <label>Size (SQMM):</label>
                        <input type="text" class="form-control" id="cable-size" required min="0">
                    </div>
                    <div class="col-md-3 form-group">
                        <label>Length (M):</label>
                        <input type="number" class="form-control" id="cable-length" min="0">
                    </div>
                    <div class="col-md-3 form-group">
                        <label>Cores:</label>
                        <input type="number" class="form-control" id="cable-cores" min="1">
                    </div>
                    <div class="col-md-3 form-group">
                        <label>Serial #:</label>
                        <input type="text" class="form-control" id="cable-serial">
                    </div>
                </div>
                <div class="form-row">
                    <div class="col-md-12 form-group">
                        <label>Description:</label>
                        <input type="text" class="form-control" id="cable-desc" >
                    </div>
                </div>
            </div>

            <!-- Cable Fittings Section -->
            <div id="cable-fittings-section" class="component-section form-section">
                <div class="form-row">
                    <div class="col-md-4 form-group">
                        <label>Material:</label>
                        <select class="form-control" id="cf-material">
                            <option value="">-- None --</option>
                            <option>Copper</option>
                            <option>PVC</option>
                            <option>Steel</option>
                        </select>
                    </div>
                    <div class="col-md-4 form-group">
                        <label>Item Name:</label>
                        <input type="text" class="form-control" id="cf-name" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="col-md-6 form-group">
                        <label>Technical Description:</label>
                        <input type="text" class="form-control" id="cf-desc">
                    </div>
                </div>
                <div class="form-row">
                    <div class="col-md-3 form-group">
                        <label>Size 1:</label>
                        <input type="number" class="form-control" id="cf-size1" min="0">
                    </div>
                    <div class="col-md-3 form-group">
                        <label>Size 2:</label>
                        <input type="number" class="form-control" id="cf-size2" min="0">
                    </div>
                    <div class="col-md-3 form-group">
                        <label>Unit:</label>
                        <select class="form-control" id="cf-unit">
                            <option>MM</option>
                            <option>Inches</option>
                            <option>SQMM</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Conduit Section -->
            <div id="conduit-section" class="component-section form-section">
                <div class="form-row">
                    <div class="col-md-4 form-group">
                        <label>Material:</label>
                        <select class="form-control" id="cond-material" required>
                            <option value="">-- Select --</option>
                            <option>PVC</option>
                            <option>Steel</option>
                        </select>
                    </div>
                    <div class="col-md-4 form-group">
                        <label>Size:</label>
                        <input type="number" class="form-control" id="cond-size" min="0" required>
                    </div>
                    <div class="col-md-3 form-group">
                        <label>Unit:</label>
                        <select class="form-control" id="cond-unit">
                            <option>MM</option>
                            <option>Inches</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Conduit Fittings Section -->
            <div id="conduit-fittings-section" class="component-section form-section">
                <div class="form-row">
                    <div class="col-md-4 form-group">
                        <label>Material (optional):</label>
                        <select class="form-control" id="condf-material">
                            <option value="">-- None --</option>
                            <option>PVC</option>
                            <option>Steel</option>
                        </select>
                    </div>
                    <div class="col-md-4 form-group">
                        <label>Item Name:</label>
                        <input type="text" class="form-control" id="condf-name" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="col-md-6 form-group">
                        <label>Technical Description:</label>
                        <input type="text" class="form-control" id="condf-desc">
                    </div>
                    <div class="col-md-3 form-group">
                        <label>Size 1:</label>
                        <input type="number" class="form-control" id="condf-size1" min="0">
                    </div>
                    <div class="col-md-3 form-group">
                        <label>Size 2:</label>
                        <input type="number" class="form-control" id="condf-size2" min="0">
                    </div>
                </div>
                <div class="form-row">
                    <div class="col-md-3 form-group">
                        <label>Unit:</label>
                        <select class="form-control" id="condf-unit">
                            <option>MM</option>
                            <option>Inches</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Electrical and Electronic Items Section -->
            <div id="electrical-and-electronic-items-section" class="component-section form-section">
                <div class="form-row">
                    <div class="col-md-4 form-group">
                        <label>Material:</label>
                        <input type="text" class="form-control" id="ei-material">
                    </div>
                    <div class="col-md-4 form-group">
                        <label>Item Name:</label>
                        <input type="text" class="form-control" id="ei-name" required>
                    </div>
                    <div class="col-md-4 form-group">
                        <label>Technical Description:</label>
                        <input type="text" class="form-control" id="ei-desc">
                    </div>
                </div>
                <div class="form-row">
                    <div class="col-md-3 form-group">
                        <label>Volts Type:</label>
                        <select class="form-control" id="ei-volts-type">
                            <option>AC</option>
                            <option>DC</option>
                        </select>
                    </div>
                    <div class="col-md-3 form-group">
                        <label>Voltage:</label>
                        <div class="input-group">
                            <input type="number" class="form-control" id="ei-volts" min="0">
                            <div class="input-group-append">
                                <span class="input-group-text" id="volts-unit">VAC</span>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3 form-group">
                        <label>Power:</label>
                        <div class="input-group">
                            <input type="number" class="form-control" id="ei-watts" min="0">
                            <select class="form-control" id="ei-watts-unit">
                                <option>W</option>
                                <option>KW</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-md-3 form-group">
                        <label>Amps:</label>
                        <div class="input-group">
                            <input type="number" class="form-control" id="ei-amps" min="0">
                            <div class="input-group-append">
                                <span class="input-group-text">A</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form-row">
                    <div class="col-md-3 form-group">
                        <label>Frequency:</label>
                        <div class="input-group">
                            <input type="number" class="form-control" id="ei-frequency" min="0">
                            <div class="input-group-append">
                                <span class="input-group-text">Hz</span>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3 form-group">
                        <label>RPM:</label>
                        <div class="input-group">
                            <input type="number" class="form-control" id="ei-rpm" min="0">
                            <div class="input-group-append">
                                <span class="input-group-text">RPM</span>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 form-group">
                        <label>Model/Serial #:</label>
                        <input type="text" class="form-control" id="ei-model">
                    </div>
                </div>
            </div>

            <!-- Character Counter -->
            <div class="form-group">
                <small id="charCounter" class="form-text text-muted char-count">0/40 characters</small>
            </div>

            <div class="mt-4">
                <button type="button" class="btn btn-primary mr-2" onclick="generateSpec()">Generate Specification</button>
                <button type="button" class="btn btn-secondary" onclick="resetForm()">Reset</button>
            </div>
        </form>

        <div class="output-group">
            <!-- Changed to textarea for editable output -->
            <textarea id="output" class="form-control mt-4" rows="2" placeholder="Generated specification will appear here"></textarea>
            <div id="output1" class="mt-4">
                <label>Full description:</label>
                <!-- Removed readonly attribute -->
                <textarea class="form-control" id="fullDescription" rows="4"></textarea>
            </div>
        </div>
    </div>

    <script src="shared-specs.js"></script>

    <script>
        const materialMap = {
            'Copper': 'CU',
            'Aluminium': 'AL',
            'PVC': 'PVC',
            'Steel': 'ST',
            'Stainless Steel': 'SS',
            'Galvanized Steel': 'GS',
            'Brass': 'BR',
            'Rubber': 'RB',
            'Nomex': 'NMX',
            'Plastic': 'PLASTIC'
        };
    
        // Define removal order for each component type
        const removalOrders = {
            'Cable': ['cable-serial', 'cable-length', 'cable-desc', 'cable-color', 'cable-cores', 'cable-size', 'cable-type', 'cable-material'],
            'Cable fittings': ['cf-desc', 'cf-size2', 'cf-size1', 'cf-material'],
            'Conduit': ['cond-unit', 'cond-size', 'cond-material'],
            'Conduit fittings': ['condf-desc', 'condf-size2', 'condf-size1', 'condf-material'],
            'Electrical and electronic items': ['ei-model', 'ei-rpm', 'ei-frequency', 'ei-amps', 'ei-watts', 'ei-volts', 'ei-desc', 'ei-material']
        };

        // Add getField function here
        const getField = id => {
            const element = document.getElementById(id);
            return element ? element.value.trim().toUpperCase() : '';
        };
    
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize input validation
            document.querySelectorAll('input, select').forEach(element => {
                element.addEventListener('input', function() {
                    this.classList.remove('is-invalid');
                    updateLiveCounter();
                });
            });
    
            // Voltage type change handler
            document.getElementById('ei-volts-type').addEventListener('change', function() {
                document.getElementById('volts-unit').textContent = `V${this.value}`;
            });
            
            // Add event listener for output textarea
            document.getElementById('output').addEventListener('input', updateLiveCounter);
        });
    
        function toggleFields() {
            const type = document.getElementById('component-type').value.toLowerCase().replace(/ /g, '-');
            document.querySelectorAll('.component-section').forEach(section => {
                section.classList.remove('active-section');
            });
            if(type) {
                const section = document.getElementById(`${type}-section`);
                if(section) section.classList.add('active-section');
            }
            updateLiveCounter();
        }
    
        function formatUnit(value, unit) {
            if(!value) return '';
            return unit === 'Inches' ? `${value}"` : `${value}${unit}`;
        }
    
        function validateRequiredFields() {
            let isValid = true;
            const activeSection = document.querySelector('.component-section.active-section');
            
            // Validate component type
            const componentType = document.getElementById('component-type');
            if(!componentType.value) {
                componentType.classList.add('is-invalid');
                isValid = false;
            }
    
            // Validate active section fields
            if(activeSection) {
                activeSection.querySelectorAll('[required]').forEach(field => {
                    if(!field.value.trim()) {
                        field.classList.add('is-invalid');
                        isValid = false;
                    }
                });
            }
    
            return isValid;
        }
        
        // Truncate spec to 40 characters using removal order
        function truncateSpec(fields, removalOrder) {
            let currentFields = [...fields];
            let specString = currentFields.map(f => f.value).join(' ');
            
            while(specString.length > 40 && currentFields.length > 0) {
                let removed = false;
                for(const fieldKey of removalOrder) {
                    const index = currentFields.findIndex(f => f.key === fieldKey);
                    if(index !== -1) {
                        currentFields.splice(index, 1);
                        removed = true;
                        break;
                    }
                }
                if(!removed) break;
                specString = currentFields.map(f => f.value).join(' ');
            }
            return specString;
        }
    
        function generateSpec() {
            const output = document.getElementById('output');
            const fullDesc = document.getElementById('fullDescription');
            const charCounter = document.getElementById('charCounter');
            output.value = '';
            output.style.color = 'inherit';
            fullDesc.value = '';
            
            try {
                if(!validateRequiredFields()) {
                    throw new Error('Please fill all required fields');
                }
    
                const type = document.getElementById('component-type').value;
                const specParts = [];
                const fullDescParts = [];
                const fields = [];
    
                switch(type) {
                    case 'Cable':
                        const color = getField('cable-color');
                        const material = document.getElementById('cable-material').value;
                        const cableType = document.getElementById('cable-type').value;
                        const desc = getField('cable-desc');
                        const cores = document.getElementById('cable-cores').value;
                        const size = getField('cable-size');
                        const length = getField('cable-length');
                        const serial = getField('cable-serial');
    
                        // Build specification parts according to SOP
                        if(color) {
                            specParts.push(color);
                            fields.push({ key: 'cable-color', value: color });
                        }
                        
                        const materialAbbr = materialMap[material] || material.substring(0, 3).toUpperCase();
                        specParts.push(materialAbbr);
                        fields.push({ key: 'cable-material', value: materialAbbr });
                        
                        const cableTypeAbbr = cableType.toUpperCase().replace(/ CABLE$/i, '');
                        specParts.push(cableTypeAbbr);
                        fields.push({ key: 'cable-type', value: cableTypeAbbr });
                        
                        if(desc) {
                            specParts.push(desc);
                            fields.push({ key: 'cable-desc', value: desc });
                        }
                        if(cores) {
                            specParts.push(`${cores}C`);
                            fields.push({ key: 'cable-cores', value: `${cores}C` });
                        }
                        if(size) {
                            specParts.push(`${size}SQMM`);
                            fields.push({ key: 'cable-size', value: `${size}SQMM` });
                        }
                        if(length) {
                            specParts.push(`${length}M`);
                            fields.push({ key: 'cable-length', value: `${length}M` });
                        }
                        if(serial) {
                            specParts.push(`S/N: ${serial}`);
                            fields.push({ key: 'cable-serial', value: `S/N: ${serial}` });
                        }
    
                        // Full description
                        fullDescParts.push(
                            color ? `${color}` : '',
                            `${material}`,
                            `${cableType}`,
                            desc ? `${desc}` : '',
                            cores ? `${cores}C` : '',
                            size ? `${size} SQMM` : '',
                            length ? `${length}M` : '',
                            serial ? `${serial}` : ''
                        );
                        break;
    
                    case 'Cable fittings':
                        const cfMaterial = document.getElementById('cf-material').value;
                        const cfName = document.getElementById('cf-name').value;
                        const cfDesc = document.getElementById('cf-desc').value;
                        const cfSize1 = document.getElementById('cf-size1').value;
                        const cfSize2 = document.getElementById('cf-size2').value;
                        const cfUnit = document.getElementById('cf-unit').value;
    
                        if(cfMaterial) {
                            const cfMaterialAbbr = materialMap[cfMaterial] || cfMaterial.substring(0, 3).toUpperCase();
                            specParts.push(cfMaterialAbbr);
                            fields.push({ key: 'cf-material', value: cfMaterialAbbr });
                        }
                        
                        const cfNameAbbr = cfName.toUpperCase().replace(/ /g, '_');
                        specParts.push(cfNameAbbr);
                        fields.push({ key: 'cf-name', value: cfNameAbbr });
                        
                        if(cfDesc) {
                            const cfDescAbbr = cfDesc.toUpperCase().replace(/ /g, '_');
                            specParts.push(cfDescAbbr);
                            fields.push({ key: 'cf-desc', value: cfDescAbbr });
                        }
                        
                        const sizeStr = [cfSize1, cfSize2].filter(s => s).map(s => formatUnit(s, cfUnit)).join(' x ');
                        if(sizeStr) {
                            specParts.push(sizeStr);
                            fields.push({ key: 'cf-size', value: sizeStr });
                        }
    
                        fullDescParts.push(
                            cfMaterial ? ` ${cfMaterial}` : '',
                            `${cfName}`,
                            `${cfDesc}`,
                            `${[cfSize1, cfSize2].filter(s => s).join(' x ')} ${cfUnit}`
                        );
                        break;
    
                    case 'Conduit':
                        const condMaterial = document.getElementById('cond-material').value;
                        const condSize = document.getElementById('cond-size').value;
                        const condUnit = document.getElementById('cond-unit').value;
    
                        const condMaterialAbbr = materialMap[condMaterial] || condMaterial.substring(0, 3).toUpperCase();
                        specParts.push(condMaterialAbbr);
                        fields.push({ key: 'cond-material', value: condMaterialAbbr });
                        
                        specParts.push('CONDUIT');
                        fields.push({ key: 'cond-type', value: 'CONDUIT' });
                        
                        const condSizeStr = formatUnit(condSize, condUnit);
                        if(condSizeStr) {
                            specParts.push(condSizeStr);
                            fields.push({ key: 'cond-size', value: condSizeStr });
                        }
    
                        fullDescParts.push(
                            `${condMaterial} Conduit`,
                            `${condSize} ${condUnit}`
                        );
                        break;
    
                    case 'Conduit fittings':
                        const condfMaterial = document.getElementById('condf-material').value;
                        const condfName = document.getElementById('condf-name').value;
                        const condfDesc = document.getElementById('condf-desc').value;
                        const condfSize1 = document.getElementById('condf-size1').value;
                        const condfSize2 = document.getElementById('condf-size2').value;
                        const condfUnit = document.getElementById('condf-unit').value;
    
                        if(condfMaterial) {
                            const condfMaterialAbbr = materialMap[condfMaterial] || condfMaterial.substring(0, 3).toUpperCase();
                            specParts.push(condfMaterialAbbr);
                            fields.push({ key: 'condf-material', value: condfMaterialAbbr });
                        }
                        
                        specParts.push('FITTING');
                        fields.push({ key: 'condf-type', value: 'FITTING' });
                        
                        const condfNameAbbr = condfName.toUpperCase().replace(/ /g, '_');
                        specParts.push(condfNameAbbr);
                        fields.push({ key: 'condf-name', value: condfNameAbbr });
                        
                        if(condfDesc) {
                            const condfDescAbbr = condfDesc.toUpperCase().replace(/ /g, '_');
                            specParts.push(condfDescAbbr);
                            fields.push({ key: 'condf-desc', value: condfDescAbbr });
                        }
                        
                        const condfSizeStr = [condfSize1, condfSize2].filter(s => s).map(s => formatUnit(s, condfUnit)).join(' x ');
                        if(condfSizeStr) {
                            specParts.push(condfSizeStr);
                            fields.push({ key: 'condf-size', value: condfSizeStr });
                        }
    
                        fullDescParts.push(
                            condfMaterial ? `${condfMaterial} Fitting` : '',
                            `${condfName}`,
                            `${condfDesc}`,
                            `${[condfSize1, condfSize2].filter(s => s).join(' x ')} ${condfUnit}`
                        );
                        break;
    
                    case 'Electrical and electronic items':
                        const eiName = document.getElementById('ei-name').value;
                        const eiMaterial = document.getElementById('ei-material').value;
                        const eiDesc = document.getElementById('ei-desc').value;
                        const eiVolts = document.getElementById('ei-volts').value;
                        const eiVoltsType = document.getElementById('ei-volts-type').value;
                        const eiWatts = document.getElementById('ei-watts').value;
                        const eiWattsUnit = document.getElementById('ei-watts-unit').value;
                        const eiAmps = document.getElementById('ei-amps').value;
                        const eiFrequency = document.getElementById('ei-frequency').value;
                        const eiRpm = document.getElementById('ei-rpm').value;
                        const eiModel = document.getElementById('ei-model').value;
    
                        if(eiMaterial) {
                            const eiMaterialAbbr = eiMaterial.toUpperCase().replace(/ /g, '_');
                            specParts.push(eiMaterialAbbr);
                            fields.push({ key: 'ei-material', value: eiMaterialAbbr });
                        }
                        
                        const eiNameAbbr = eiName.toUpperCase().replace(/ /g, '_');
                        specParts.push(eiNameAbbr);
                        fields.push({ key: 'ei-name', value: eiNameAbbr });
                        
                        if(eiDesc) {
                            const eiDescAbbr = eiDesc.toUpperCase().replace(/ /g, '_');
                            specParts.push(eiDescAbbr);
                            fields.push({ key: 'ei-desc', value: eiDescAbbr });
                        }
                        
                        if(eiVolts) {
                            const voltsStr = `${eiVolts}V${eiVoltsType}`;
                            specParts.push(voltsStr);
                            fields.push({ key: 'ei-volts', value: voltsStr });
                        }
                        
                        if(eiWatts) {
                            const wattsStr = `${eiWatts}${eiWattsUnit}`;
                            specParts.push(wattsStr);
                            fields.push({ key: 'ei-watts', value: wattsStr });
                        }
                        
                        if(eiAmps) {
                            const ampsStr = `${eiAmps}A`;
                            specParts.push(ampsStr);
                            fields.push({ key: 'ei-amps', value: ampsStr });
                        }
                        
                        if(eiFrequency) {
                            const freqStr = `${eiFrequency}Hz`;
                            specParts.push(freqStr);
                            fields.push({ key: 'ei-frequency', value: freqStr });
                        }
                        
                        if(eiRpm) {
                            const rpmStr = `${eiRpm}RPM`;
                            specParts.push(rpmStr);
                            fields.push({ key: 'ei-rpm', value: rpmStr });
                        }
                        
                        if(eiModel) {
                            const modelStr = `S/N: ${eiModel}`;
                            specParts.push(modelStr);
                            fields.push({ key: 'ei-model', value: modelStr });
                        }
    
                        fullDescParts.push(
                            eiMaterial ? `${eiMaterial}` : '',
                            `${eiName}`,
                            `${eiDesc}`,
                            eiVolts ? `${eiVolts}V${eiVoltsType}` : '',
                            eiWatts ? `${eiWatts}${eiWattsUnit}` : '',
                            eiAmps ? `${eiAmps}A` : '',
                            eiFrequency ? `${eiFrequency}Hz` : '',
                            eiRpm ? `${eiRpm}` : '',
                            eiModel ? `${eiModel}` : ''
                        );
                        break;
                }
    
                // Get removal order for this component type
                const removalOrder = removalOrders[type] || [];
                
                // Generate short specification with truncation
                const shortSpec = truncateSpec(fields, removalOrder);
                const charCount = shortSpec.length;
    
                // Update display
                output.value = shortSpec;
                output.style.color = charCount > 40 ? 'red' : 'inherit';
                charCounter.textContent = `${charCount}/40 characters`;
                charCounter.style.color = charCount > 40 ? 'red' : 'inherit';
    
                // Update full description
                fullDesc.value = fullDescParts.filter(p => p).join(' ');
    
            } catch(error) {
                output.style.color = 'red';
                output.value = error.message;
                fullDesc.value = '';
            }
        }
        
        function updateLiveCounter() {
            try {
                const output = document.getElementById('output');
                const outputText = output.value;
                const count = outputText.length;
                document.getElementById('charCounter').textContent = 
                    `${count}/40 characters`;
                document.getElementById('charCounter').style.color = 
                    count > 40 ? 'red' : '#6c757d';
            } catch {
                document.getElementById('charCounter').textContent = '0/40 characters';
            }
        }
    
        function resetForm() {
            document.getElementById('componentForm').reset();
            document.querySelectorAll('.component-section').forEach(section => {
                section.classList.remove('active-section');
            });
            document.querySelectorAll('.is-invalid').forEach(el => el.classList.remove('is-invalid'));
            document.getElementById('output').value = '';
            document.getElementById('fullDescription').value = '';
            document.getElementById('charCounter').textContent = '0/40 characters';
            document.getElementById('charCounter').style.color = '#6c757d';
        }
    </script>
    
</body>
</html>